<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Diabolical Gift â€“ Planetary Time Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ----------------------------------------------------------
   FLIGHTLINE THEME â€” DARK NAVY / CYAN / RUNWAY LIGHTS
-----------------------------------------------------------*/
:root {
  --bg: #020712;
  --panel: #0a1220;
  --card: #111c2e;
  --accent: #00eaff;
  --accent2: #00ff9c;
  --muted: #6d7a92;
  --text: #e2ecf7;
  --border: rgba(255,255,255,0.10);
  --glow: 0 0 12px rgba(0,255,255,0.35);
  --font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

body {
  margin:0;
  font-family:var(--font);
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing: antialiased;
}

main {
  padding:22px;
  max-width:900px;
  margin:auto;
}

/* ----------------------------------------------------------
   HEADERS
-----------------------------------------------------------*/
h1 {
  font-size:1.8rem;
  margin:0 0 16px;
  text-align:center;
  color:var(--accent);
  text-shadow: var(--glow);
}

h2 {
  font-size:1.3rem;
  margin:0 0 12px;
  color:var(--accent2);
}

/* ----------------------------------------------------------
   PANELS
-----------------------------------------------------------*/
.panel {
  background:var(--panel);
  padding:18px 20px;
  border-radius:18px;
  border:1px solid var(--border);
  margin-bottom:22px;
  box-shadow:0 0 18px rgba(0,0,0,0.25);
}

/* ----------------------------------------------------------
   INPUTS
-----------------------------------------------------------*/
input {
  width:100%;
  padding:12px 14px;
  font-size:1rem;
  margin-top:8px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--card);
  color:var(--text);
}

button {
  margin-top:12px;
  width:100%;
  padding:14px;
  font-size:1.1rem;
  background:var(--accent);
  color:#000;
  font-weight:bold;
  border:none;
  border-radius:12px;
  cursor:pointer;
  box-shadow:var(--glow);
}
button:hover { filter:brightness(1.1); }

/* ----------------------------------------------------------
   RESULT CARDS
-----------------------------------------------------------*/
.resultCard {
  padding:14px;
  background:var(--card);
  border-radius:14px;
  border:1px solid var(--border);
  margin-bottom:10px;
}

.stepCard {
  padding:16px;
  background:var(--card);
  border-radius:16px;
  border:1px solid var(--border);
  margin-bottom:14px;
}

.stepTop {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:8px;
}

.stepTitle {
  font-weight:700;
  font-size:1.05rem;
}

.pill {
  background:var(--accent2);
  color:#000;
  padding:4px 10px;
  border-radius:999px;
  font-size:0.75rem;
  font-weight:bold;
}

/* ----------------------------------------------------------
   COMMAND INTERFACE
-----------------------------------------------------------*/
#commandConsole {
  background:#000;
  color:var(--accent);
  padding:18px;
  border-radius:16px;
  font-family:monospace;
  font-size:0.95rem;
  height:200px;
  overflow-y:auto;
  border:1px solid var(--accent);
}

#commandInput {
  width:100%;
  padding:12px;
  margin-top:8px;
  font-family:monospace;
  background:#050f1a;
  color:var(--accent2);
  border:1px solid var(--accent);
  border-radius:12px;
}

/* ----------------------------------------------------------
   COSMIC KPI CARDS
-----------------------------------------------------------*/
.kpiGrid {
  display:grid;
  gap:12px;
  grid-template-columns:1fr;
}
@media (min-width:760px){
  .kpiGrid { grid-template-columns:repeat(2,1fr); }
}

.kpi {
  padding:14px;
  border-radius:14px;
  background:var(--card);
  border:1px solid var(--border);
}

.kpi .name { font-weight:800; }
.kpi .meta { color:var(--muted); font-size:0.9rem; margin-top:6px; }

.bar {
  height:10px;
  border-radius:999px;
  background:rgba(255,255,255,0.08);
  overflow:hidden;
  margin-top:10px;
}

.fill {
  height:100%;
  background:var(--accent);
}

.pct {
  margin-top:6px;
  font-size:0.85rem;
  color:var(--accent2);
}

/* ----------------------------------------------------------
   SCROLL SECTIONS
-----------------------------------------------------------*/
.small { font-size:0.85rem; color:var(--muted); }
.muted { color:var(--muted); }

/* ----------------------------------------------------------
   END STYLE
-----------------------------------------------------------*/
</style>
</head>
<body>
<main>

<h1>ðŸ›« The Diabolical Gift â€” Planetary Time Engine</h1>
<p class="small" style="text-align:center;">
A FlightLine Outernet Clock â€¢ Planetary â€¢ Solar â€¢ Galactic â€¢ Command-Driven
</p>

<!-- ======================================================
     COMMAND CONSOLE â€” USER TYPES COMMANDS LIKE A TERMINAL
======================================================= -->
<section class="panel">
  <h2>FlightLine Command Console</h2>
  <div id="commandConsole">
    [SYSTEM READY] Type <strong>help</strong> for available commands.<br>
  </div>
  <input id="commandInput" type="text" placeholder="Enter commandâ€¦ e.g., planet age, solar cycles, galactic time">
</section>


<!-- ======================================================
     SECTION: BIRTHDATE INPUT
======================================================= -->
<section class="panel">
  <h2>Your Earth Birthdate</h2>
  <p class="small">Used to compute planetary ages and alignment windows.</p>

  <input id="birthInput" type="date">
  <button id="calcBtn">Calculate Planetary Profile</button>

  <div id="earthAgeCard" class="resultCard" style="display:none;">
    <strong>Earth Age:</strong>
    <div id="earthAgeVal"></div>
  </div>
</section>


<!-- ======================================================
     SECTION: PLANETARY RESULTS
======================================================= -->
<section class="panel" id="planetaryPanel" style="display:none;">
  <h2>Planetary Ages & Birthdays</h2>
  <div id="planetaryResults"></div>
</section>


<!-- ======================================================
     CELEBRATION + ALIGNMENT PANEL
======================================================= -->
<section class="panel" id="dailyActionPanel" style="display:none;">
  <h2>Todayâ€™s Planetary Alignment</h2>
  <p class="muted small">Based on your nearest upcoming planetary birthday.</p>

  <div id="dailyActionCard" class="stepCard">
    <div class="stepTop">
      <div class="stepTitle" id="dailyPlanet">â€”</div>
      <span class="pill" id="dailyPct">â€”</span>
    </div>

    <div class="stepMeta" id="dailyWhy">â€”</div>

    <div class="commandMsg" id="dailyAction">â€”</div>

    <div class="commandMeta" id="dailyMeta">
      UTC anchored â€¢ Reflective protocol â€¢ Not predictive
    </div>
  </div>
</section>


<!-- ======================================================
     SOLAR + GALACTIC CYCLES PANEL
======================================================= -->
<section class="panel" id="cosmicCyclesPanel" style="display:none;">
  <h2>Cosmic Cycles</h2>
  <p class="muted small">Solar â†’ Earth System â†’ Galactic time progression (UTC snapshot).</p>

  <div id="cosmicCyclesTable"></div>
</section>


</main>
<script>
// =========================================================
//  CONSTANTS
// =========================================================
const MS_PER_DAY = 86400000;

// Orbital periods in Earth years (approx)
const ORBITAL = [
  { name:"Mercury", years:0.2408467 },
  { name:"Venus",   years:0.61519726 },
  { name:"Earth",   years:1.0 },
  { name:"Mars",    years:1.8808158 },
  { name:"Jupiter", years:11.862615 },
  { name:"Saturn",  years:29.447498 },
  { name:"Uranus",  years:84.016846 },
  { name:"Neptune", years:164.79132 }
];

// =========================================================
//  CELEBRATION PROTOCOLS
// =========================================================
const CELEBRATIONS = {
  Mercury:{
    title:"Clarity Cycle",
    why:"Mercury completes its year quickly â€” signaling precision and mental sharpness.",
    action:"Reduce cognitive noise. Set one clear intention. Clean one thread."
  },
  Venus:{
    title:"Harmony Cycle",
    why:"Venus marks rhythm, balance, and sensory coherence.",
    action:"Slow down. Appreciate beauty. Offer gratitude to one person."
  },
  Earth:{
    title:"Integration Cycle",
    why:"Earth frames the baseline reality of seasons and return.",
    action:"Walk outdoors. Observe light, temperature, and motion."
  },
  Mars:{
    title:"Momentum Cycle",
    why:"Mars marks discipline, force-with-control, and decisive motion.",
    action:"Complete a difficult task. Move your body intentionally."
  },
  Jupiter:{
    title:"Expansion Cycle",
    why:"Jupiter rewards patience, wisdom, and long study arcs.",
    action:"Learn something new today. Teach it to someone else."
  },
  Saturn:{
    title:"Structure Cycle",
    why:"Saturn draws lines, sets boundaries, and clarifies responsibility.",
    action:"Organize one system. Reduce excess. Reinforce one boundary."
  },
  Uranus:{
    title:"Innovation Cycle",
    why:"Uranus pushes controlled disruption and unconventional insight.",
    action:"Break one routine. Try an unusual idea or method."
  },
  Neptune:{
    title:"Reflection Cycle",
    why:"Neptune emphasizes inner clarity, calm, and imagination.",
    action:"Sit in silence. Visualize your next state without pressure."
  }
};

// =========================================================
//  AGE CALC
// =========================================================
function computeEarthAge(birthUTC){
  const now = Date.now();
  return (now - birthUTC) / (MS_PER_DAY * 365.2425);
}

function computePlanetaryAges(earthAge){
  return ORBITAL.map(p=>{
    const raw = earthAge / p.years;
    const full = Math.floor(raw);
    const pct = (raw - full) * 100;
    const remain = 100 - pct;
    return { planet:p.name, fullYears:full, pct, remaining:remain };
  });
}

// =========================================================
//  RENDER PLANETARY AGE TABLE
// =========================================================
function renderPlanetaryResults(ages){
  const box = document.getElementById("planetaryResults");
  let html = "";
  ages.forEach(a=>{
    html += `
      <div class="resultCard">
        <strong>${a.planet}</strong><br>
        ${a.fullYears.toFixed(0)} planetary years<br>
        <span class="pill">${a.pct.toFixed(2)}% through current year</span>
      </div>
    `;
  });
  box.innerHTML = html;
}

// =========================================================
//  DAILY ALIGNMENT ENGINE
// =========================================================
function computeDailyAlignment(earthAge){
  if (!earthAge) return null;

  let best = null;
  ORBITAL.forEach(p=>{
    const pAge = earthAge / p.years;
    const pct = (pAge % 1) * 100;
    const remain = 100 - pct;
    if (!best || remain < best.remaining){
      best = { planet:p.name, pct, remaining:remain };
    }
  });

  const proto = CELEBRATIONS[best.planet];
  if (!proto) return null;

  return {
    planet:best.planet,
    pctToNext:best.remaining,
    title:proto.title,
    why:proto.why,
    action:proto.action
  };
}

function renderDailyAction(earthAge){
  const panel = document.getElementById("dailyActionPanel");
  const card  = document.getElementById("dailyActionCard");
  if (!earthAge){
    panel.style.display="none";
    return;
  }
  panel.style.display="block";

  const d = computeDailyAlignment(earthAge);

  document.getElementById("dailyPlanet").textContent =
    `${d.planet} â€” ${d.title}`;

  document.getElementById("dailyPct").textContent =
    `${d.pctToNext.toFixed(2)}% to next birthday`;

  document.getElementById("dailyWhy").textContent = d.why;

  document.getElementById("dailyAction").innerHTML =
    `<strong>Todayâ€™s Action:</strong><br>${d.action}`;
}

// =========================================================
//  COSMIC CYCLES (SOLAR + EARTH SYSTEM + GALACTIC)
// =========================================================
const COSMIC_CYCLES = [
  // ----- SOLAR -----
  {
    group:"Solar",
    name:"Solar Rotation",
    anchor_utc: Date.UTC(2000,0,1,0,0,0),
    period_days:27.2753,
    note:"Approximate Carrington-like rotation."
  },
  {
    group:"Solar",
    name:"Solar Activity Cycle",
    anchor_utc: Date.UTC(2000,0,1,0,0,0),
    period_days:11 * 365.2425,
    note:"~11-year magnetic activity cycle."
  },

  // ----- EARTH SYSTEM -----
  {
    group:"Earth System",
    name:"Earth Day",
    anchor_utc: Date.UTC(2000,0,1,0,0,0),
    period_days:1,
    note:"Earthâ€™s rotation period (solar day)."
  },
  {
    group:"Earth System",
    name:"Tropical Year",
    anchor_utc: Date.UTC(2000,0,1,0,0,0),
    period_days:365.2425,
    note:"Seasonal year length."
  },

  // ----- EARTH LONG CYCLES -----
  {
    group:"Earth System",
    name:"Axial Precession",
    anchor_utc: Date.UTC(2000,0,1,0,0,0),
    period_days:25772 * 365.2425,
    note:"~25,772-year wobble (approx)."
  },

  // ----- GALACTIC -----
  {
    group:"Galactic",
    name:"Galactic Year",
    anchor_utc: Date.UTC(2000,0,1,0,0,0),
    period_days:230_000_000 * 365.2425,
    note:"Sunâ€™s orbit around Milky Way (~230M yrs)."
  }
];

function pctThroughCycle(nowMs, anchorMs, periodDays){
  const periodMs = periodDays * MS_PER_DAY;
  let delta = (nowMs - anchorMs) % periodMs;
  if (delta < 0) delta += periodMs;
  return (delta / periodMs) * 100;
}

function fmtPeriod(days){
  if (days < 2) return `${days.toFixed(3)} days`;
  if (days < 500) return `${days.toFixed(2)} days`;
  const yrs = days/365.2425;
  if (yrs < 2000) return `${yrs.toFixed(2)} years`;
  if (yrs < 1000000) return `${(yrs/1000).toFixed(2)}k years`;
  if (yrs < 1000000000) return `${(yrs/1000000).toFixed(2)}M years`;
  return `${(yrs/1e9).toFixed(2)}B years`;
}

function renderCosmicCycles(birthUTC){
  const panel = document.getElementById("cosmicCyclesPanel");
  panel.style.display="block";

  const table = document.getElementById("cosmicCyclesTable");
  const now = Date.now();

  const cards = COSMIC_CYCLES.map(c=>{
    const pct = pctThroughCycle(now, c.anchor_utc, c.period_days);
    const personal = birthUTC
      ? ((now - birthUTC) / (c.period_days * MS_PER_DAY)).toFixed(4)
      : null;

    return `
      <div class="kpi">
        <div class="name">${c.group} â€¢ ${c.name}</div>
        <div class="meta">Period: <strong>${fmtPeriod(c.period_days)}</strong></div>
        <div class="meta">${c.note}</div>
        <div class="meta">
          Personal cycles since birth:
          <strong>${personal ?? "Add birthdate"}</strong>
        </div>
        <div class="bar"><div class="fill" style="width:${pct.toFixed(2)}%"></div></div>
        <div class="pct">${pct.toFixed(2)}% through current cycle</div>
      </div>
    `;
  }).join("");

  table.innerHTML = `<div class="kpiGrid">${cards}</div>`;
}

// =========================================================
//  COMMAND SYSTEM
// =========================================================
function pushConsole(msg, color="var(--accent)"){
  const con = document.getElementById("commandConsole");
  con.innerHTML += `<span style="color:${color};">${msg}</span><br>`;
  con.scrollTop = con.scrollHeight;
}

function runCommand(txt){
  const cmd = txt.trim().toLowerCase();

  if (cmd === "help"){
    pushConsole("[COMMANDS] planet age, solar cycles, galactic time, scroll top, scroll bottom");
    return;
  }
  if (cmd === "planet age"){
    document.getElementById("planetaryPanel").scrollIntoView({behavior:"smooth"});
    pushConsole("[NAV] Moved to planetary section.");
    return;
  }
  if (cmd === "solar cycles"){
    document.getElementById("cosmicCyclesPanel").scrollIntoView({behavior:"smooth"});
    pushConsole("[NAV] Solar + Earth cycle panel.");
    return;
  }
  if (cmd === "galactic time"){
    document.getElementById("cosmicCyclesPanel").scrollIntoView({behavior:"smooth"});
    pushConsole("[NAV] Galactic cycle panel.");
    return;
  }
  if (cmd === "scroll top"){
    window.scrollTo({top:0, behavior:"smooth"});
    pushConsole("[NAV] Scrolling to top.");
    return;
  }
  if (cmd === "scroll bottom"){
    window.scrollTo({top:document.body.scrollHeight, behavior:"smooth"});
    pushConsole("[NAV] Scrolling to bottom.");
    return;
  }

  pushConsole("[ERROR] Unknown command. Type help.");
}

// =========================================================
//  MAIN CALCULATION HANDLER
// =========================================================
document.getElementById("calcBtn").onclick = ()=>{
  const birthStr = document.getElementById("birthInput").value;
  if (!birthStr){
    alert("Enter your birthdate.");
    return;
  }

  const [y,m,d] = birthStr.split("-").map(Number);
  const birthUTC = Date.UTC(y,m-1,d);

  const earthAge = computeEarthAge(birthUTC);
  document.getElementById("earthAgeCard").style.display="block";
  document.getElementById("earthAgeVal").textContent =
    earthAge.toFixed(6) + " Earth years";

  // Planetary ages
  const ages = computePlanetaryAges(earthAge);
  document.getElementById("planetaryPanel").style.display="block";
  renderPlanetaryResults(ages);

  // Alignment
  renderDailyAction(earthAge);

  // Cosmic engine
  renderCosmicCycles(birthUTC);
};

// =========================================================
//  COMMAND INPUT LISTENER
// =========================================================
document.getElementById("commandInput").addEventListener("keydown", e=>{
  if (e.key === "Enter"){
    const val = e.target.value;
    pushConsole("> " + val, "var(--accent2)");
    runCommand(val);
    e.target.value = "";
  }
});
</script>
